%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% feature extraction main function ---> main.m
%%% Author: Mojdeh Rastgoo
%%% UB-UdG 
%%% Verison: 1.0 
%%% This version is only applicable for extracting global features not
%%% local features 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%%% Initialization 
%%%% This is specific to PH2 dataset 
ImgPath = '/home/mojdeh/Documents/PhD/Coding/Datasets/PH2Dataset/'; 
resultPath = '/home/mojdeh/Documents/PhD/Coding/Matlab_codes/Classification/M_D_B_PH2/'; 
name1 = 'PH2_Dataset_images';
name2 = '_Dermoscopic_Image'; 
name3 = '_lesion';
load(fullfile(ImgPath, 'PH2_DataInformation.mat')); 

data = Data_Sorted; 

for i = 1 : length(BinaryLabels)
    currFile = Idx_label(i) ; 

    Img = imread(fullfile(ImgPath, name1, cell2mat(data(currFile,1)) ,[cell2mat(data(currFile,1)) name2], ...
        [cell2mat(data(currFile,1)) '.bmp']));
    Mask = imread(fullfile(ImgPath, name1, cell2mat(data(currFile,1)) ,[cell2mat(data(currFile,1)) name3],...
        [cell2mat(data(currFile,1)) '_lesion.bmp']));
    
    LBP_feature(i) = ExtractFeatures(Img,'LBP', Mask); 
    CLBP_feature(i) = ExtractFeatures(Img, 'CLBP', Mask); 
    GLCMaO_feature(i) = ExtractFeatures(Img, 'GLCMaO', Mask); 
    distance = 9; num_levels = 32; 
    GLCMaD_feature(i) = ExtractFeatures(Img,'GLCMaD',Mask, distance, num_levels); 
    
end 

function my_function(varargin)
  X.StartValue = 0;
  X.StopOnError = false;
  X.SolverType = {'fixedstep','variablestep'};
  X.OutputFile = 'out.txt';
  X = parseargs(X,varargin{:});

Then call (e.g.):
